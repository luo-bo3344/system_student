<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
	<meta charset="utf-8">
	<meta name="viewport"
		  content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
	<title>班级-班级信息管理</title>
	<link rel="icon" th:href="@{~/static/images/users/logo-ico.png}" type="image/ico">
	<link href="../static/css/bootstrap.min.css" th:href="@{~/static/css/bootstrap.min.css}"
		  rel="stylesheet">
	<link href="../static/css/materialdesignicons.min.css"
		  th:href="@{~/static/css/materialdesignicons.min.css}" rel="stylesheet">
	<link href="../static/css/style.min.css" th:href="@{~/static/css/style.min.css}"
		  rel="stylesheet">
</head>

<body>
<div class="lyear-layout-web">
	<div class="lyear-layout-container">
		<div th:replace="common/commons :: commonMenu(3)">
		</div>
		<main class="lyear-layout-content">
			<div class="container-fluid">
				<div class="row">
					<div class="col-lg-12">
						<div class="card">
							<div class="card-toolbar clearfix">
								<div class="card-header">
									<h3 style="color: #824bf1">查询结果</h3>
									<a class="btn btn-success pull-right" th:href="@{/stuClass/returnToList}">返回班级信息列表</a>
								</div>
								<div class="card-body">
									<div class="table-responsive">
										<table class="table table-bordered">
											<thead>
											<tr>
												<th>编号</th>
												<th>班级名称</th>
												<th>班级简介/口号</th>
												<th>班级信息修改时间</th>
												<shiro:hasAnyRoles name="admin,teacher">
													<th>操作</th>
												</shiro:hasAnyRoles>
											</tr>
											</thead>
											<tbody>
											<tr th:each="one ,number: ${queryStudentClasses}">
												<td th:text="${number.count}"></td>
												<td style="display:none" th:text="one.id"></td>
												<td th:text="${one.className}"></td>
												<td th:text="${one.description}"></td>
												<td th:text="${#dates.format(one.updateTime, 'yyyy-MM-dd HH:mm:ss')}"></td>
												<shiro:hasAnyRoles name="admin,teacher">
													<td>
														<a class="btn btn-xs btn-default" href=""
														   th:href="@{'/stuClass/updateStuClass/'+${one.id}}">
															<i class="mdi mdi-table-edit"
															   style="color: limegreen">编辑</i></a>
														<a class="btn btn-xs btn-default"
														   href="javascript:void(0)" th:onclick="|del(${one.id})|">
															<i class="mdi mdi-delete" style="color: red">删除</i></a>
													</td>
												</shiro:hasAnyRoles>
											</tr>
											</tbody>
										</table>
										<span class="alert-danger" th:text="${NotFound}"></span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>
	</div>
</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<script type="text/javascript" src="js/jquery.min.js"
		th:src="@{~/static/js/jquery.min.js}"></script>
<script type="text/javascript" src="js/bootstrap.min.js"
		th:src="@{~/static/js/bootstrap.min.js}"></script>
<script type="text/javascript" src="js/perfect-scrollbar.min.js"
		th:src="@{~/static/js/perfect-scrollbar.min.js}"></script>
<script type="text/javascript" src="js/main.min.js" th:src="@{~/static/js/main.min.js}"></script>
<script type="text/javascript" th:src="@{~/static/js/jquery-3.1.1.js}"></script>
<script type="text/javascript">
    //删除学生信息
    function del(id) {
        var sure = confirm("确定删除班级信息吗？请谨慎操作！");
        if (sure) {
            $.ajax({
                url: "[[@{/stuClass/delete/}]]" + id,
                data: {"id": id},
                type: "GET",
                success: function (data) {
                    console.log(data)
                    if (data === "删除成功") {
                        window.location.reload();
                        alert("删除成功");

                    }
                }
            });
        }
    }

    //搜索判断是否为空
    function alert() {
        var teacher = $("#searchteacher").val();
        if (teacher == null) {
            alert("请输入搜索名称")
            return false;
        }
    }

    $(function () {
        $('.search-bar .dropdown-menu a').click(function () {
            var field = $(this).data('field') || '';
            $('#search-field').val(field);
            $('#search-btn').html($(this).text() + ' <span class="caret"></span>');
        });
    });
</script>
</body>
</html>