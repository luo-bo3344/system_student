<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="utf-8">
	<meta name="viewport"
		  content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
	<title>学生信息修改</title>
	<link href="../static/css/bootstrap.min.css" th:href="@{~/static/css/bootstrap.min.css}"
		  rel="stylesheet">
	<link href="../static/css/style.min.css" th:href="@{~/static/css/style.min.css}"
		  rel="stylesheet">
	<link href="../static/css/materialdesignicons.min.css"
		  th:href="@{~/static/css/materialdesignicons.min.css}"
		  rel="stylesheet">
	<link href="../static/css/bootstrap.min.css" th:href="@{~/static/css/bootstrap.min.css}"
		  rel="stylesheet">
	<link href="../static/css/materialdesignicons.min.css"
		  th:href="@{~/static/css/materialdesignicons.min.css}" rel="stylesheet">
	<link href="../static/css/style.min.css" th:href="@{~/static/css/style.min.css}"
		  rel="stylesheet">
</head>

<body th:object="${studentInformation}">
<div class="lyear-layout-web">
	<div class="lyear-layout-container">
		<div th:replace="common/commons :: commonMenu(2)">
		</div>
		<!--页面主要内容-->
		<main class="lyear-layout-content">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-12">
						<div class="card">
							<div class="card-header"><h3>学生信息修改</h3></div>
							<div class="card-body">
								<form class="form-horizontal" name="studentInformation"
									  th:action="@{/student/updateStudentInformation}"
									  method="post" onsubmit="return check()">
									<div class="form-group" style="display: none">
										<label class="col-md-3 control-label" for="id">用户名</label>
										<div class="col-md-7">
											<input class="form-control" id="id"
												   placeholder="请输入用户名" name="id"
												   th:value="${studentInformation.id}">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label" for="username">用户名</label>
										<div class="col-md-7">
											<input class="form-control" id="username"
												   placeholder="请输入用户名" name="username"
												   th:value="${studentInformation.username}">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label"
											   for="password">密码</label>
										<div class="col-md-7">
											<input class="form-control" type="password" id="password"
												   name="password" placeholder="请输入密码.."
												   th:value="${studentInformation.password}">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label"
											   for="name">姓名</label>
										<div class="col-md-7">
											<input class="form-control" type="text" id="name"
												   name="name" placeholder="请输入姓名.."
												   th:value="${studentInformation.name}">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label"
											   for="age">年龄</label>
										<div class="col-md-7">
											<input class="form-control" type="text" id="age"
												   name="age" placeholder="请输入年龄.."
												   th:value="${studentInformation.age}">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label"
											   for="sex">性别</label>
										<div class="col-md-7">
											<select class="form-control" id="sex" name="sex">
												<option th:text="${studentInformation.sex}"></option>
												<option th:value="男">男</option>
												<option th:value="女">女</option>
											</select>
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label"
											   for="birthday">出生日期</label>

										<div class="col-md-7">
											<input class="form-control js-datepicker m-b-10" type="text"
												   id="birthday" name="birthday"
												   placeholder="日期格式：yyyy-mm-dd"
												   data-date-format="yyyy-mm-dd"
												   th:value="${#dates.format(studentInformation.birthday, 'yyyy-MM-dd')}"/>
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label"
											   for="address">家庭住址</label>
										<div class="col-md-7">
											<input class="form-control" type="text" id="address"
												   name="address" placeholder="请输入家庭住址.."
												   th:value="${studentInformation.address}">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label"
											   for="phone">联系电话</label>
										<div class="col-md-7">
											<input class="form-control" type="text" id="phone"
												   name="phone" placeholder="请输入联系电话.."
												   th:value="${studentInformation.phone}">
										</div>
									</div>
									<div class="form-group">
										<label class="col-md-3 control-label"
											   for="info">信息创建时间</label>
										<div class="col-md-7">
											<input readonly="readonly"
												   class="form-control js-datepicker m-b-10"
												   type="text"
												   id="info" name="example-datepicker"
												   placeholder="yyyy-mm-dd"
												   data-date-format="yyyy-mm-dd"
												   th:value="${#dates.format(studentInformation.createTime, 'yyyy-MM-dd HH:mm:ss')}"/>
										</div>
									</div>
									<div class="form-group">
										<div class="col-md-10 col-md-offset-3">
											<button class="btn btn-success" type="submit">保存学生信息系修改</button>
											<a class="btn bg-primary"
											   th:href="@{/student/returnToList}">返回学生信息列表</a>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</main>
	</div>
</div>
<!--日期选择插件-->
<script type="text/javascript" th:src="@{~/static/js/main.min.js}"></script>
<script type="text/javascript" th:src="@{~/static/js/jquery-3.1.1.js}"></script>
</body>
<script>
    function check() {
        /*判断用户名是否为空*/
        var name = document.getElementById("username").value;
        console.log(name);
        if (name == null || name == '') {
            alert("用户名不能为空");
            studentInformation.username.focus();
            return false;
        }

        /*判断日期格式是否正确*/
        var str = $("#birthday").val();
        var reg = /^(\d{4})-(\d{2})-(\d{2})$/;
        var arr = reg.exec(str);
        /* if (str=="") {
             return true;
         }*/
        if (!reg.test(str) || RegExp.$2 > 12 || RegExp.$3 > 31) {
            alert("请保证输入的日期格式为2019-01-01类型的正确日期!");
            return false;
        }

        //判断电话号码格式是否正确
        //var phone = document.getElementById("phone").value;
        var phone = $("#phone").val();
        var phoneCompare = /^1[3|5|7|8][0-9]\d{8}$/
        console.log(phone + "phone" + phone.length);
        if (!phoneCompare.test(phone)) {
            alert("电话号码格式错误,请重新输入");
            return false;
        }
    }
</script>
</html>