<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lb.mapper.AuthorizationInfoUserMapper">
    <resultMap id="user" type="com.lb.entity.AuthorizationInfoUser">
        <id column="id" property="id"/>
        <result column="username" property="username"/>
        <result column="password" property="password"/>
        <result column="name" property="name"/>
        <result column="age" property="age"/>
        <result column="sex" property="sex"/>
        <result column="birthday" property="birthday"/>
        <result column="address" property="address"/>
        <result column="phone" property="phone"/>
        <result column="create_time" property="createTime"/>
        <result column="update_time" property="updateTime"/>
        <result column="status" property="status"/>
        <result column="relationship" property="relationship"/>
        <association property="role" javaType="com.lb.entity.Role">
            <id column="id" property="id"></id>
            <result column="role_name" property="roleName"></result>
            <result column="description" property="description"></result>
        </association>
    </resultMap>
    <!--授权信息查询-->
    <select id="queryUserForAuthorization" parameterType="java.lang.String" resultMap="user">
		select u.username,u.password,u.name,r.role_name,u.relationship
		from user u
		inner join t_user_role t on u.id=t.user_id
		inner join role r on t.role_id=r.id
		where username=#{username} and u.status=1
	</select>
</mapper>
